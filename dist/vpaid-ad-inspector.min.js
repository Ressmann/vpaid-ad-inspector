!function t(e,i,n){function o(a,d){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!d&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){this._destroyed||(a.$removeAll.call(this),r.default.call(this,"AdStopped"))};var o=t("../trigger"),r=n(o),a=t("../toggles")},{"../toggles":4,"../trigger":5}],2:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return(i-t)/(e-t)}function r(t,e,i,n,r){return i+(n-i)*o(t,e,r)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){if(!this._destroyed){var t=this._videoSlot,e=r(0,t.duration,0,100,t.currentTime),i=this._lastQuartilePosition;if(!(e<i.position)){i.hook&&i.hook(),d.default.call(this,i.event);var n=this._quartileEvents;this._lastQuartilePosition=n[n.indexOf(i)+1]}}};var a=t("../trigger"),d=n(a)},{"../trigger":5}],3:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){this._attributes.skippableState=!0}function a(t){v.default.call(this,"AdError",t)}function d(){var t=this._videoSlot;return t?(l(t,[this._attributes.width,this._attributes.height]),s(t,this._parameters.videos||[])?void 0:a.call(this,"no supported video found")):a.call(this,"no video")}function l(t,e){t.setAttribute("width",e[0]),t.setAttribute("height",e[1]),t.style.width=e[0]+"px",t.style.height=e[1]+"px"}function s(t,e){var i=e.filter(function(e){return t.canPlayType(e.mimetype)});return 0===i.length?!1:(t.setAttribute("src",i[0].url),!0)}var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(i,"__esModule",{value:!0});var p=t("./util/load-css"),c=n(p),h=t("./trigger"),v=n(h),f=t("./toggles"),g=t("./handler/vast-ended"),y=n(g),b=t("./handler/vast-timeupdate"),A=n(b),_=function(){function t(){o(this,t),this._slot=null,this._videoSlot=null,this._subscribers={},this._attributes={companions:"",desiredBitrate:256,duration:30,remainingTime:-1,expanded:!1,icons:!1,linear:!0,skippableState:!1,viewMode:"normal",width:0,height:0,volume:1},this._quartileEvents=[{event:"AdVideoStart",position:0},{event:"AdVideoFirstQuartile",position:25},{event:"AdVideoMidpoint",position:50},{event:"AdSkippableStateChange",position:65,hook:r.bind(this)},{event:"AdVideoThirdQuartile",position:75},{event:"AdVideoComplete",position:100}],this._lastQuartilePosition=this._quartileEvents[0],this._parameters={}}return u(t,[{key:"handshakeVersion",value:function(t){return"2.0"}},{key:"initAd",value:function(t,e,i,n,o,r){this._attributes.width=t,this._attributes.height=e,this._attributes.viewMode=i,this._attributes.desiredBitrate=n,this._slot=r.slot,this._videoSlot=r.videoSlot,this._style=(0,c.default)("ad.css"),d.call(this),this._videoSlot.addEventListener("timeupdate",A.default.bind(this),!1),this._videoSlot.addEventListener("ended",y.default.bind(this),!1),v.default.call(this,"AdLoaded")}},{key:"startAd",value:function(){this._videoSlot.play(),this._ui={},v.default.call(this,"AdStarted")}},{key:"stopAd",value:function(){this._destroyed||(f.$removeAll.call(this),v.default.call(this,"AdStopped"))}},{key:"skipAd",value:function(){this._destroyed||this._attributes.skippableState&&(f.$removeAll.call(this),v.default.call(this,"AdSkipped"),v.default.call(this,"AdStopped"))}},{key:"resizeAd",value:function(t,e,i){this._attributes.width=t,this._attributes.height=e,this._attributes.viewMode=i,v.default.call(this,"AdSizeChange")}},{key:"pauseAd",value:function(){this._videoSlot.pause(),v.default.call(this,"AdPaused")}},{key:"resumeAd",value:function(){this._videoSlot.play(),v.default.call(this,"AdPlaying")}},{key:"expandAd",value:function(){v.default.call(this,"AdExpandedChange")}},{key:"collapseAd",value:function(){v.default.call(this,"AdExpandedChange")}},{key:"subscribe",value:function(t,e,i){this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e].push({callback:t,context:i})}},{key:"unsubscribe",value:function(t,e){var i=this._subscribers[e];Array.isArray(i)&&(this._subscribers[e]=i.filter(function(e){return t!==e}))}},{key:"getAdLinear",value:function(){return this._attributes.linear}},{key:"getAdWidth",value:function(){return this._attributes.width}},{key:"getAdHeight",value:function(){return this._attributes.height}},{key:"getAdExpanded",value:function(){return this._attributes.expanded}},{key:"getAdSkippableState",value:function(){return this._attributes.skippableState}},{key:"getAdRemainingTime",value:function(){return this._attributes.remainingTime}},{key:"getAdDuration",value:function(){return this._attributes.duration}},{key:"getAdVolume",value:function(){return this._attributes.volume}},{key:"getAdCompanions",value:function(){return this._attributes.companions}},{key:"getAdIcons",value:function(){return this._attributes.icons}},{key:"setAdVolume",value:function(t){return 0>t||t>1?a("volume is not valid"):(this._videoSlot.volume=this._attributes.volume=t,void v.default.call(this,"AdVolumeChange"))}}]),t}();i.default=_},{"./handler/vast-ended":1,"./handler/vast-timeupdate":2,"./toggles":4,"./trigger":5,"./util/load-css":6}],4:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){a.call(this,t),r.call(this,t),this._attributes.expandAd=t,this._attributes.remainingTime=t?-2:-1,s.default.call(this,"AdExpandedChange"),s.default.call(this,"AdDurationChange")}function r(t){t?this._videoSlot.pause():this._videoSlot.play()}function a(t){function e(){return t?"block":"none"}this._ui.interact.style.display=e(),this._ui.xBtn.style.display=e()}function d(){this._destroyed=!0,this._videoSlot.src="",this._style.parentElement.removeChild(this._style),this._slot.innerHTML="",this._ui=null}Object.defineProperty(i,"__esModule",{value:!0}),i.$toggleExpand=o,i.$togglePlay=r,i.$toggleUI=a,i.$removeAll=d;var l=t("./trigger"),s=n(l)},{"./trigger":5}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i=this._subscribers[t]||[];i.forEach(function(t){t.callback.apply(t.context,e)})}},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,parent.document.body.appendChild(e),e}},{}],7:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=t("./linear"),r=n(o);window.getVPAIDAd=function(){return new r.default}},{"./linear":8}],8:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)};Object.defineProperty(i,"__esModule",{value:!0});var s=t("vpaid-ad/src/linear"),u=n(s),p=t("vpaid-ad/src/trigger"),c=n(p),h='<div style="background:#f5f5f5; width:100%; height:100%">\n  <div style="height: 100%; display: inline-block; float:left;">\n    <select id="eventSelect" size="10">\n      <option value="AdStarted" selected>AdStarted</option>\n      <option value="AdStopped">AdStopped</option>\n      <option value="AdLoaded">AdLoaded</option>\n      <option value="AdLinearChange">AdLinearChange</option>\n      <option value="AdSizeChange">AdSizeChange</option>\n      <option value="AdExpandedChange">AdExpandedChange</option>\n      <option value="AdSkippableStateChange">AdSkippableStateChange</option>\n      <option value="AdDurationChange">AdDurationChange</option>\n      <option value="AdRemainingTimeChange">AdRemainingTimeChange</option>\n      <option value="AdVolumeChange">AdVolumeChange</option>\n      <option value="AdImpression">AdImpression</option>\n      <option value="AdVideoStart">AdVideoStart</option>\n      <option value="AdVideoFirstQuartile">AdVideoFirstQuartile</option>\n      <option value="AdVideoMidpoint">AdVideoMidpoint</option>\n      <option value="AdVideoThirdQuartile">AdVideoThirdQuartile</option>\n      <option value="AdVideoComplete">AdVideoComplete</option>\n      <option value="AdUserAcceptInvitation">AdUserAcceptInvitation</option>\n      <option value="AdUserMinimize">AdUserMinimize</option>\n      <option value="AdUserClose">AdUserClose</option>\n      <option value="AdPaused">AdPaused</option>\n      <option value="AdPlaying">AdPlaying</option>\n      <option value="AdClickThru">AdClickThru</option>\n      <option value="AdError">AdError</option>\n      <option value="AdLog">AdLog</option>\n      <option value="AdInteraction">AdInteraction</option>\n    </select>\n  </div>\n  <div>\n    <table>\n      <tr>\n        <td>\n          <b>companions</b>\n          <br>\n          <span id="companions">None</span>\n        </td>\n        <td>\n          <b>desired bitrate</b>\n          <br>\n          <span id="desiredBitrate">-1</span>\n        </td>\n        <td>\n          <b>duration</b><br><span id="duration">-1</span>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <b>expanded</b><br><span id="expanded">false</span>\n        </td>\n        <td><b>height</b><br><span id="height">-1</span></td>\n        <td><b>icons</b><br><span id="icons">None</span></td>\n      </tr>\n      <tr>\n        <td><b>linear</b><br><span id="linear">True</span></td>\n        <td><b>remaining time</b><br><span id="remainingTime">-1</span></td>\n        <td>\n          <b>skippable state</b><br>\n          <span id="skippableState">False</span>\n        </td>\n      </tr>\n      <tr>\n        <td><b>volume</b><br><span id="volume">1.0</span></td>\n        <td><b>view mode</b><br><span id="viewMode">normal</span></td>\n        <td><b>width</b><br><span id="width">5</span></td>\n      </tr>\n    </table>\n    <div>\n      <hr>\n      <div id="AdClickThruOptions" style="display:none;">\n        Click Through URL <input type="text" id="clickThruUrl" value="http://example.com"/><br>\n        ID <input type="text" id="clickThruId" value="1"/><br>\n        Player Handles <input type="text" id="clickThruPlayerHandels" value="false"/><br>\n      </div>\n      <div id="AdErrorOptions" style="display:none;">\n        AdError <input type="text" id="adErrorMsg" value="ad error message"/>\n      </div>\n      <div id="AdLogOptions" style="display:none;">\n        AdLog <input type="text" id="adLogMsg" value="ad log message"/>\n      </div>\n      <div id="AdInteractionOptions" style="display:none;">\n        AdInteraction\n        <input type="text" id="adInteractionId" value="1"/>\n      </div>\n    </div>\n    <h2><input type="button" id="triggerEvent" value="Trigger Event"/></h2>\n  </div>\n  <div style="position:fixed; bottom:30px">\n    Last event from player <input type="text" style="width:200px" id="lastVpaidEvent" value=""/>\n  </div>\n</div>',v=function(t){function e(){return o(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),d(e,[{key:"initAd",value:function(t,e,i,n,o,r){this._attributes.width=t,this._attributes.height=e,this._attributes.viewMode=i,this._attributes.desiredBitrate=n,this._slot=r.slot,this._videoSlot=r.videoSlot,this.log("initAd "+t+"x"+e+" "+i+" "+n),this.renderSlot_(),this.addButtonListeners_(),this.fillProperties_(),c.default.call(this,"AdLoaded")}},{key:"resizeAd",value:function(t,i,n){l(Object.getPrototypeOf(e.prototype),"resizeAd",this).call(this,t,i,n),this.log("resizeAd "+t+"x"+i+" "+n),this._attributes.width=t,this._attributes.height=i,this._attributes.viewMode=n,this.fillProperties_(),c.default.call(this,"AdSizeChange")}},{key:"pauseAd",value:function(){l(Object.getPrototypeOf(e.prototype),"pauseAd",this).call(this),this.log("pauseAd")}},{key:"expandAd",value:function(){l(Object.getPrototypeOf(e.prototype),"expandAd",this).call(this),this.log("expandAd")}},{key:"collapseAd",value:function(){l(Object.getPrototypeOf(e.prototype),"collapseAd",this).call(this),this.log("collapseAd")}}]),e}(u.default);i.default=v,v.prototype.renderSlot_=function(){var t=this._slot&&"DIV"===this._slot.tagName;t||(this._slot=document.createElement("div"),document.body||(document.body=document.createElement("body")),document.body.appendChild(this._slot)),this._slot.innerHTML=h},v.prototype.addButtonListeners_=function(){var t=document.getElementById("eventSelect");t.addEventListener("change",this.eventSelected_.bind(this));var e=document.getElementById("triggerEvent");e.addEventListener("click",this.triggerEvent_.bind(this))},v.prototype.triggerEvent_=function(){var t=document.getElementById("eventSelect"),e=t.value;if("AdClickThru"===e){var i=document.getElementById("clickThruUrl").value,n=document.getElementById("clickThruId").value,o=document.getElementById("clickThruPlayerHandels").value;this.log("AdClickThu("+i+","+n+","+o+")"),c.default.call(this,"AdClickThru",[i,n,o])}else if("AdError"===e){var r=document.getElementById("adErrorMsg").value;this.log(e+"("+r+")"),c.default.call(this,"AdError",[r])}else if("AdLog"===e){var a=document.getElementById("adLogMsg").value;this.log(e+"("+a+")"),c.default.call(this,"AdLog",[a])}else if("AdInteraction"===e){var d=document.getElementById("adInteractionId").value;this.log(e+"("+d+")"),c.default.call(this,"AdInteraction",[d])}else this.log(e+"()"),c.default.call(this,e)},v.prototype.log=function(t){var e=document.getElementById("lastVpaidEvent");null!=e&&(e.value=t)},v.prototype.eventSelected_=function(){var t=document.getElementById("AdClickThruOptions"),e=document.getElementById("AdErrorOptions"),i=document.getElementById("AdLogOptions"),n=document.getElementById("AdInteractionOptions");t.style.display="none",e.style.display="none",i.style.display="none",n.style.display="none";var o=document.getElementById("eventSelect"),r=o.value;"AdClickThru"===r?t.style.display="inline":"AdError"===r?e.style.display="inline":"AdLog"===r?i.style.display="inline":"AdInteraction"===r&&(n.style.display="inline")},v.prototype.fillProperties_=function(){for(var t in this._attributes)t&&document.getElementById(t)&&(document.getElementById(t).textContent=this._attributes[t])}},{"vpaid-ad/src/linear":3,"vpaid-ad/src/trigger":5}]},{},[7]);